<div th:fragment="purchase-list" xmlns:th="http://www.w3.org/1999/xhtml"
	class="col-md-12">
	<!-- general form elements-->
	<div class="card card-primary">
		<div class="card-header">
			<h3 class="card-title">Purchase History</h3>
		</div>
		<!-- card-header-->
		<div class="card-body">
			<table class="table table-bordered table-striped"
				id="tblPurchaseList">
				<thead>
					<tr>
						<th>Purchase Id</th>
						<th>Product Name</th>
						<th>Bill Number</th>
						<th>Purchase Quantity</th>
						<th>Amount Before Tax</th>
						<th>Gst Amount</th>
						<th>Discount Amount</th>
						<th>Payable Amount</th>
						<th></th>
					</tr>
				</thead>
			</table>
		</div>
	</div>
	<script th:inline="javascript">
		/*<![CDATA[*/
$(document).ready(function() {
	var datatable = $('#tblPurchaseList').DataTable({
		"paging": true,
		"lengthChange": false,
		"searching": false,
		"ordering": true,
		"info": true,
		"autoWidth": false,
		"responsive": true,
		"ajax": {
			"url": "/api/purchases/purchaseRecords",
			"dataSrc": ""
		},
		"columns": [
			{ "data": "purchaseId" },
			{ "data": "productName" },
			{ "data": "billNumber" },
			{ "data": "purchaseQuantity" },
			{ "data": "amountBeforeTax" },
			{ "data": "gstAmount" },
			{ "data": "discountAmount" },
			{ "data": "payableAmount" },
			{
				data: null,
				className: "dt-center editor-edit",
				defaultContent: '<i class="fa fa-edit"/>',
				orderable: false
			}
		],
		"dom": '<"toolbar">frtip'
	});
	$("div.toolbar").html('<button id="createPur" type="button" class="btn btn-block btn-info" style="width:80px;">Create</button>');
	// Edit record
	$('#tblPurchaseList').on('click', 'td.editor-edit', function(e) {
		e.preventDefault();
		var rowData = datatable.rows(this).data();
		window.location.href = '/purchases/editPurchase/' + rowData[0].purchaseId;
		//console.log('You clicked this' + rowData[0].purchaseId);
		//console.log(rowData[0]);
	});
	$("#createPur").click(function() {
		window.location.href = '/purchases/createPurchase';
	});
});
		/*]]>*/
	</script>
</div>